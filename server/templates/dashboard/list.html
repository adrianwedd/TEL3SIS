{% extends "dashboard/layout.html" %}
{% block title %}Call Dashboard{% endblock %}
{% block content %}
<h1>Call History</h1>
<form method="get">
  <input type="text" name="filter" placeholder="Search" value="{{ filter }}" />
  <select name="limit">
    <option value="10" {% if limit == 10 %}selected{% endif %}>10</option>
    <option value="20" {% if limit == 20 %}selected{% endif %}>20</option>
    <option value="50" {% if limit == 50 %}selected{% endif %}>50</option>
  </select>
  <input type="hidden" name="sort" value="{{ sort }}" />
  <button type="submit">Apply</button>
</form>
<ul>
{% for call in calls %}
  <li>
    <a href="{{ url_for('dashboard.call_detail', call_id=call.id) }}">
      {{ call.created_at.strftime('%Y-%m-%d %H:%M') }} - {{ call.from_number }} â†’ {{ call.to_number }}
    </a>
  </li>
{% else %}
  <li>No calls found.</li>
{% endfor %}
</ul>
<div class="pagination">
  {% if prev_offset is not none %}
    <a href="{{ url_for('dashboard.show_dashboard', offset=prev_offset, limit=limit, filter=filter, sort=sort) }}">Previous</a>
  {% endif %}
  {% if next_offset is not none %}
    <a href="{{ url_for('dashboard.show_dashboard', offset=next_offset, limit=limit, filter=filter, sort=sort) }}">Next</a>
  {% endif %}
</div>
{% endblock %}
